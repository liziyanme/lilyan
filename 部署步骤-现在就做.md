# 部署三步：GitHub → Vercel → 域名

按下面顺序做，做完就能用你的域名访问日记站。

---

## 第一步：推送到 GitHub

在 **`c:\diary`** 目录打开终端（PowerShell 或 CMD），执行：

```bash
git add -A
git commit -m "feat: 背景渐变、详情返回、删除样式、草稿/头像/照片等"
git push
```

- 若提示登录 GitHub，在浏览器里用你的账号授权即可。
- 若还没连过仓库：先到 [GitHub](https://github.com) 新建仓库，再执行  
  `git remote add origin https://github.com/你的用户名/仓库名.git`  
  `git branch -M main`  
  `git push -u origin main`

---

## 第二步：Vercel 部署

1. 打开 **[vercel.com](https://vercel.com)**，用 **GitHub 登录**。
2. 点 **Add New** → **Project**。
3. 选你的仓库（如 `liziyanme/lilyan`），点 **Import**。
4. 在 **Environment Variables** 里添加两条：
   - `NEXT_PUBLIC_SUPABASE_URL` = Supabase 项目 URL（Supabase → Settings → API）
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY` = anon 公钥（eyJ 开头，同一页）
5. 点 **Deploy**，等 1～2 分钟。
6. 部署完成后会得到一个地址（如 `xxx.vercel.app`），先点进去确认能打开。

---

## 第三步：Supabase + 域名

### 先配 Vercel 域名（登录才能用）

1. 打开 [Supabase Dashboard](https://supabase.com/dashboard) → 你的项目。
2. **Authentication** → **URL Configuration**。
3. **Site URL** 填：`https://你的vercel地址.vercel.app`（把「你的vercel地址」换成上一步的 xxx）。
4. **Redirect URLs** 里添加：`https://你的vercel地址.vercel.app/**`  
   再保留：`http://localhost:3000/**`（本地用）。  
5. 保存。用 Vercel 给的地址打开站点，注册/登录试一下是否正常。

### 再绑自己的域名（可选）

1. **Vercel**：项目里 **Settings** → **Domains** → 输入你的域名（如 `diary.你的主域名.com`）→ **Add**。
2. **域名服务商**（阿里云/腾讯云/Cloudflare 等）：  
   - 类型 **CNAME**  
   - 主机记录填子域名前缀（如 `diary`）  
   - 记录值填 Vercel 提示的那串（如 `cname.vercel-dns.com` 或项目给的 `xxx.vercel.app`）。
3. 解析生效后，回到 **Supabase** → **URL Configuration**：  
   - **Site URL** 改成 `https://diary.你的主域名.com`  
   - **Redirect URLs** 里加上 `https://diary.你的主域名.com/**`。  
4. 用你的域名打开网站，再试一次登录。

---

做完这三步：代码在 GitHub，网站在 Vercel，登录用 Supabase，要用自己域名就按第三步绑好即可。
